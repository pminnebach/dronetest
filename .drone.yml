pipeline:
  build:
    image: golang:${GO_VERSION}
    environment:
      - GOOS=${GO_OS}
      - GOARCH=${GO_ARCH}
    commands:
      - go get golang.org/x/sys/windows/registry
      - go build -o WindowsVersion_$GOOS_$GOARCH.exe
  scp:
    image: appleboy/drone-scp
      host: ${docker01_host}
      username: ${docker01_username}
      password: ${docker01_password}
      port: 4430
      target: /release
      source: WindowsVersion/*.exe

matrix:
  GO_VERSION:
    - 1.8
    - 1.7
    - latest
  GO_ARCH:
    - 386
    - amd64
  GO_OS:
    - windows